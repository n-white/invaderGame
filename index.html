<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="src/style.css">
  <title>Space Invader</title>  
</head>
<body>
  <h1 class="message"></h1>

  <script src="lib/jquery.js"></script>
  <script src="src/spaceship.js"></script>
  <script src="src/laser.js"></script>
  <script src="src/invader.js"></script>
  <script>
    window.numberOfInvaders = 20
    window.invaders = [];

    var $spaceship = new Spaceship(200);
    var spaceshipTop = $spaceship.$node.offset().top;
    var topOffset = 100;
    var leftOffset = 0;

    window.$spaceship = $spaceship;

    for (var i = 0; i < numberOfInvaders; i++) {
      if (i === 10) {
        topOffset += 80;
        leftOffset = 0;

      }
      if (i === 20) {
        topOffset += 80;
        leftOffset = 0;
      }
      if (i === 30) {
        topOffset += 80;
        leftOffset = 0;
      }

      leftOffset += 100;
      window.invaders.push(new Invader(leftOffset, topOffset));        
    };

    window.invaders.forEach(function(item) {
      $('body').append(item.$node);
    });

    $('body').append($spaceship.$node);  

    $('body').keydown(function (event) {
      if (event.which === 32) {
        var $laser = new Laser($spaceship.left + 72, 120);
        $(this).append($laser.$laserNode);
        $laser.shootUp();
      }
    });  

  </script>
</body>
</html>